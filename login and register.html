<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login / Register â€“ Signage Hub</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="signage hub logo 2-1.png" />
</head>
<body class="bg-gradient-to-br from-blue-100 to-purple-100 flex items-center justify-center min-h-screen">

  <div class="bg-white p-10 pl-20 rounded-2xl shadow-2xl w-full max-w-xl animate-fade-in-down">

    <!-- Logo and Title -->
    <div class="flex items-center justify-start gap-6 mb-8">
      <a href="index.html" class="flex gap-4 items-center hover:opacity-80 transition">
        <img src="signage hub logo 2-1.png" alt="Signage Hub Logo" class="w-20 h-20" />
        <div class="flex flex-col justify-center h-full">
          <span class="text-4xl font-bold text-blue-700 leading-tight">Signage Hub</span>
        </div>
      </a>
    </div>

    <!-- Dynamic Form Title -->
    <h2 id="formTitle" class="text-xl font-semibold mb-4 text-center text-gray-700 transition-all duration-300">Login</h2>

    <!-- Login Form -->
    <div id="loginForm">
      <form class="space-y-4">
        <input type="email" placeholder="Email" class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400" required />
        <input type="password" placeholder="Password" class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400" required />
        <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition-all">Login</button>
      </form>
      <p class="text-sm text-center mt-4">
        Don't have an account?
        <button onclick="toggleForm('registerForm')" class="text-blue-600 hover:underline">Register</button>
      </p>
    </div>

    <!-- Register Form -->
    <div id="registerForm" class="hidden">
      <form class="space-y-4">
        <input type="email" placeholder="Email" class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-400" required />
        <input type="password" placeholder="Password" class="w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-400" required />
        <button type="submit" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700 transition-all">Register</button>
      </form>
      <p class="text-sm text-center mt-4">
        Already have an account?
        <button onclick="toggleForm('loginForm')" class="text-blue-600 hover:underline">Login</button>
      </p>
    </div>

    <!-- Divider -->
    <div class="flex items-center my-6">
      <hr class="flex-grow border-gray-300" />
      <span class="mx-3 text-gray-400 text-sm">or</span>
      <hr class="flex-grow border-gray-300" />
    </div>

    <!-- Google Sign-In -->
    <div class="text-center">
      <button id="googleSignInBtn" class="bg-white text-gray-700 border border-gray-300 rounded px-4 py-2 shadow flex items-center gap-2 mx-auto hover:shadow-md transition">
        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google Logo" class="w-5 h-5" />
        Sign in with Google
      </button>
    </div>
  </div>

  <!-- Firebase Auth Script -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.7.3/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/11.7.3/firebase-auth.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.7.3/firebase-analytics.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDsFA7bsReGxPISwfax9Cg71khQunFrZxk",
      authDomain: "signage-hub.firebaseapp.com",
      projectId: "signage-hub",
      storageBucket: "signage-hub.firebasestorage.app",
      messagingSenderId: "785565518737",
      appId: "1:785565518737:web:edf765be8a83710f57a830",
      measurementId: "G-E52Q44PJRC"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const analytics = getAnalytics(app);

    // Toggle form
    window.toggleForm = function (formToShow) {
      document.getElementById("loginForm").classList.add("hidden");
      document.getElementById("registerForm").classList.add("hidden");
      document.getElementById(formToShow).classList.remove("hidden");
      document.getElementById("formTitle").innerText = formToShow === "loginForm" ? "Login" : "Register";
    };

    // Store display name in localStorage and redirect
    function redirectToIndex(user) {
      const displayName = user.displayName || user.email;
      localStorage.setItem("displayName", displayName);
      window.location.href = "index.html";
    }

    // Register user
    const registerForm = document.querySelector("#registerForm form");
    registerForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const email = registerForm.querySelector("input[type='email']").value;
      const password = registerForm.querySelector("input[type='password']").value;

      createUserWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
          alert("Registration successful!");
          redirectToIndex(userCredential.user);
        })
        .catch((error) => {
          alert("Registration failed: " + error.message);
        });
    });

    // Login user
    const loginForm = document.querySelector("#loginForm form");
    loginForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const email = loginForm.querySelector("input[type='email']").value;
      const password = loginForm.querySelector("input[type='password']").value;

      signInWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
          alert("Login successful!");
          redirectToIndex(userCredential.user);
        })
        .catch((error) => {
          alert("Login failed: " + error.message);
        });
    });

    // Google sign-in
    const googleBtn = document.getElementById("googleSignInBtn");
    googleBtn.addEventListener("click", () => {
      const provider = new GoogleAuthProvider();
      signInWithPopup(auth, provider)
        .then((result) => {
          alert("Google sign-in successful!");
          redirectToIndex(result.user);
        })
        .catch((error) => {
          alert("Google sign-in failed: " + error.message);
        });
    });
  </script>

  <!-- Animations -->
  <style>
    @keyframes fade-in-down {
      0% {
        opacity: 0;
        transform: translateY(-20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .animate-fade-in-down {
      animation: fade-in-down 0.5s ease-out;
    }
  </style>
</body>
</html>